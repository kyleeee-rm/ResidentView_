<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Barangay Admin Dashboard</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            // Preserving your existing color scheme
            'pending': '#FFA500',
            'approved': '#4CAF50',
            'released': '#2196F3',
            'rejected': '#F44336',
            'sidebar': '#2c3e50',
            'topbar': '#34495e',
            'primary': '#3498db',
            'secondary': '#2980b9',
            'danger': '#e74c3c',
            'success': '#2ecc71',
            'warning': '#f39c12',
            'info': '#1abc9c',
          }
        }
      }
    }
  </script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    /* Preserving your existing custom styles */
    .status-box {
      transition: all 0.3s ease;
    }
    .status-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .sidebar a:hover {
      background-color: rgba(255,255,255,0.1);
    }
    .btn-shine {
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        to right,
        transparent 0%,
        rgba(255,255,255,0.2) 50%,
        transparent 100%
      );
      transition: left 0.7s;
    }
    .btn-add-resident:hover .btn-shine,
    .btn-delete-residents:hover .btn-shine {
      left: 100%;
    }
    .fade-in {
      animation: fadeIn 0.5s;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    /* Dark mode transitions */
    body, .sidebar, .topbar {
      transition: background-color 0.3s ease, color 0.3s ease;
    }
  </style>
</head>

<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200">
  <div class="flex h-screen overflow-hidden">
    <!-- Sidebar -->
    <div class="sidebar bg-sidebar text-white w-64 flex-shrink-0 transition-all duration-300 dark:bg-gray-800">
      <div class="p-4">
        <h2 class="text-xl font-bold mb-6">Admin Panel</h2>
        <nav class="space-y-2">
          <a onclick="showSection('dashboard')" class="flex items-center p-2 rounded hover:bg-opacity-10 hover:bg-white cursor-pointer transition-colors">
            <i class="fas fa-tachometer-alt mr-3"></i>
            Dashboard
          </a>
          <a onclick="showSection('documentRequests')" class="flex items-center p-2 rounded hover:bg-opacity-10 hover:bg-white cursor-pointer transition-colors">
            <i class="fas fa-file-alt mr-3"></i>
            Document Requests
          </a>
          <a onclick="showSection('approvedDocuments')" class="flex items-center p-2 rounded hover:bg-opacity-10 hover:bg-white cursor-pointer transition-colors">
            <i class="fas fa-check-circle mr-3"></i>
            Approved Documents
          </a>
          <a onclick="showSection('releasedDocuments')" class="flex items-center p-2 rounded hover:bg-opacity-10 hover:bg-white cursor-pointer transition-colors">
            <i class="fas fa-paper-plane mr-3"></i>
            Released Documents
          </a>
          <a onclick="showSection('rejectedDocuments')" class="flex items-center p-2 rounded hover:bg-opacity-10 hover:bg-white cursor-pointer transition-colors">
            <i class="fas fa-times-circle mr-3"></i>
            Rejected Documents
          </a>
          <a onclick="showSection('residents')" class="flex items-center p-2 rounded hover:bg-opacity-10 hover:bg-white cursor-pointer transition-colors">
            <i class="fas fa-users mr-3"></i>
            Residents
          </a>
          <a href="#" onclick="showSection('adminSettings')" class="flex items-center p-2 rounded hover:bg-opacity-10 hover:bg-white cursor-pointer transition-colors">
            <i class="fas fa-cog mr-3"></i>
            Admin Settings
          </a>
        </nav>
      </div>
      <!-- Dark mode toggle -->
      <div class="absolute bottom-4 left-4">
        <button id="darkModeToggle" class="p-2 rounded-full bg-gray-700 text-white dark:bg-gray-200 dark:text-gray-800">
          <i class="fas fa-moon dark:hidden"></i>
          <i class="fas fa-sun hidden dark:block"></i>
        </button>
      </div>
    </div>

    <div class="flex-1 flex flex-col overflow-hidden">
      <!-- Topbar -->
      <div class="topbar bg-topbar text-white p-4 flex items-center justify-between dark:bg-gray-700">
        <div class="topbar-left flex items-center">
          <img src="../MA_seal.png" alt="Logo" class="h-12 w-12 mr-3" />
          <h1 class="text-xl font-bold">Barangay Market Area</h1>
        </div>
        <!-- <div class="topbar-right flex items-center space-x-4">
          <div class="search-bar relative">
            <input type="text" placeholder="Search..." class="pl-8 pr-4 py-2 rounded-full bg-gray-700 text-white focus:outline-none" />
            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
          </div>
          <div class="admin-icon h-8 w-8 rounded-full bg-primary flex items-center justify-center font-bold">A</div>
        </div> -->
      </div>

      <!-- Main Content -->
      <div class="flex-1 overflow-y-auto p-6">
        <!-- Dashboard Section -->
        <div class="content" id="dashboard">
          <h2 class="text-2xl font-bold mb-6">Dashboard</h2>
          <div class="status-boxes grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
            <div class="status-box pending bg-pending text-white p-6 rounded-lg shadow">
              <p id="pendingCount" class="text-3xl font-bold mb-2">0</p>
              <h3 class="text-lg">Pending Requests</h3>
            </div>
            <div class="status-box approved bg-approved text-white p-6 rounded-lg shadow">
              <p id="approvedCount" class="text-3xl font-bold mb-2">0</p>
              <h3 class="text-lg">Approved Documents</h3>
            </div>
            <div class="status-box released bg-released text-white p-6 rounded-lg shadow">
              <p id="releasedCount" class="text-3xl font-bold mb-2">0</p>
              <h3 class="text-lg">Released Documents</h3>
            </div>
            <div class="status-box rejected bg-rejected text-white p-6 rounded-lg shadow">
              <p id="rejectedCount" class="text-3xl font-bold mb-2">0</p>
              <h3 class="text-lg">Rejected Requests</h3>
            </div>
          </div>
          <div class="chart-container bg-white rounded-lg shadow p-6 dark:bg-gray-800">
            <h3 class="text-xl font-semibold mb-4">Monthly Statistics</h3>
            <div class="chart-wrapper">
              <canvas id="statusChart"></canvas>
            </div>
          </div>
        </div>

        <!-- Document Requests Section -->
        <div class="content" id="documentRequests" style="display: none;">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold">Document Requests</h2>
            <div class="filter-search-bar flex items-center space-x-4">
              <div class="icons">
                <button class="filter-icon bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="toggleFilter()">
                  <i class="fas fa-filter mr-2"></i>Filter
                </button>
              </div>
              <div class="search-section flex">
                <input type="text" id="searchInput" placeholder="Type to search..." oninput="filterTable(this.value)" 
                  class="border border-gray-300 rounded-l px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                <button class="search-icon bg-primary text-white px-4 py-2 rounded-r hover:bg-secondary transition-colors" onclick="toggleSearch()">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Filter Panel -->
          <div id="filterPanel" class="filter-panel bg-white rounded-lg shadow mb-6 p-4 hidden dark:bg-gray-800">
            <div class="filter-header flex justify-between items-center mb-4">
              <h3 class="text-lg font-semibold">Filter Options</h3>
              <button class="close-filter text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" onclick="toggleFilter()">&times;</button>
            </div>
            <div class="filter-content space-y-4">
              <div class="filter-group">
                <label class="block mb-2 font-medium">Document Type:</label>
                <div class="multi-select-container relative">
                  <div class="multi-select-display border border-gray-300 rounded px-4 py-2 cursor-pointer flex justify-between items-center dark:bg-gray-700 dark:border-gray-600" onclick="toggleDocTypeDropdown()">
                    <span id="docTypeDisplay">All Types</span>
                    <span class="dropdown-arrow">▼</span>
                  </div>
                  <div id="docTypeDropdown" class="multi-select-dropdown absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded shadow-lg hidden dark:bg-gray-700 dark:border-gray-600">
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Barangay Clearance" onchange="updateDocTypeFilter()" class="mr-2"> Barangay Clearance
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Certificate of Indigency" onchange="updateDocTypeFilter()" class="mr-2"> Certificate of Indigency
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Business Permit" onchange="updateDocTypeFilter()" class="mr-2"> Business Permit
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Barangay ID" onchange="updateDocTypeFilter()" class="mr-2"> Barangay ID
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Certificate of Residency" onchange="updateDocTypeFilter()" class="mr-2"> Certificate of Residency
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="filter-group">
                <label class="block mb-2 font-medium">Status:</label>
                <div class="status-checkbox-container flex space-x-4">
                  <label class="checkbox-label flex items-center">
                    <input type="checkbox" value="Pending" onchange="updateStatusFilter()" class="mr-2"> Pending
                  </label>
                  <label class="checkbox-label flex items-center">
                    <input type="checkbox" value="In Progress" onchange="updateStatusFilter()" class="mr-2"> In Progress
                  </label>
                </div>
              </div>
              <div class="filter-group">
                <label class="block mb-2 font-medium">Date Range:</label>
                <div class="flex items-center space-x-2">
                  <input type="date" id="dateFrom" onchange="applyFilters()" class="border border-gray-300 rounded px-3 py-1 dark:bg-gray-700 dark:border-gray-600">
                  <span>to</span>
                  <input type="date" id="dateTo" onchange="applyFilters()" class="border border-gray-300 rounded px-3 py-1 dark:bg-gray-700 dark:border-gray-600">
                </div>
              </div>
              <button class="clear-filters bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="clearFilters()">Clear All</button>
            </div>
          </div>

          <!-- Main Table -->
          <div class="table-container bg-white rounded-lg shadow overflow-hidden dark:bg-gray-800">
            <div class="overflow-x-auto">
              <table class="requestTab w-full">
                <thead class="bg-gray-100 dark:bg-gray-700">
                  <tr>
                    <th class="px-6 py-3 text-left font-medium">Name</th>
                    <th class="px-6 py-3 text-left font-medium">Document Type</th>
                    <th class="px-6 py-3 text-left font-medium">Date</th>
                    <th class="px-6 py-3 text-left font-medium">Status</th>
                    <th class="px-6 py-3 text-left font-medium">View Progress</th>
                  </tr>
                </thead>
                <tbody id="applicantsTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
                  <tr id="row-0" class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4">Juan Dela Cruz<span class="change-indicator text-red-500" id="indicator-0" style="display:none;">*</span></td>
                    <td class="px-6 py-4">Barangay Clearance</td>
                    <td class="px-6 py-4">2025-06-01</td>
                    <td class="px-6 py-4"><span class="status-pending text-pending font-medium">Pending</span></td>
                    <td class="px-6 py-4">
                      <button class="view-button bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors" onclick="showApplicantModal(0, 'Juan Dela Cruz', 'Barangay Clearance', 'Pending', 'Employment purposes', ['Paid'])">View</button>
                    </td>
                  </tr>
                  <tr id="row-1" class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4">Maria Santos<span class="change-indicator text-red-500" id="indicator-1" style="display:none;">*</span></td>
                    <td class="px-6 py-4">Certificate of Indigency</td>
                    <td class="px-6 py-4">2025-06-02</td>
                    <td class="px-6 py-4"><span class="status-pending text-pending font-medium">Pending</span></td>
                    <td class="px-6 py-4">
                      <button class="view-button bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors" onclick="showApplicantModal(1, 'Maria Santos', 'Certificate of Indigency', 'Pending', 'Medical assistance', ['Valid ID', 'Birth Certificate'])">View</button>
                    </td>
                  </tr>
                  <tr id="row-2" class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4">Pedro Rodriguez<span class="change-indicator text-red-500" id="indicator-2" style="display:none;">*</span></td>
                    <td class="px-6 py-4">Business Permit</td>
                    <td class="px-6 py-4">2025-06-03</td>
                    <td class="px-6 py-4"><span class="status-pending text-pending font-medium">Pending</span></td>
                    <td class="px-6 py-4">
                      <button class="view-button bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors" onclick="showApplicantModal(2, 'Pedro Rodriguez', 'Business Permit', 'Pending', 'Start new business', ['DTI Registration', 'BIR Certificate', 'Valid ID'])">View</button>
                    </td>
                  </tr>
                  <tr id="row-3" class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4">Ana Garcia<span class="change-indicator text-red-500" id="indicator-3" style="display:none;">*</span></td>
                    <td class="px-6 py-4">Barangay ID</td>
                    <td class="px-6 py-4">2025-06-04</td>
                    <td class="px-6 py-4"><span class="status-pending text-pending font-medium">Pending</span></td>
                    <td class="px-6 py-4">
                      <button class="view-button bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors" onclick="showApplicantModal(3, 'Ana Garcia', 'Barangay ID', 'Pending', 'Identification purposes', ['Birth Certificate', 'Proof of Residency'])">View</button>
                    </td>
                  </tr>
                  <tr id="row-4" class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4">Carlos Mendoza<span class="change-indicator text-red-500" id="indicator-4" style="display:none;">*</span></td>
                    <td class="px-6 py-4">Certificate of Residency</td>
                    <td class="px-6 py-4">2025-06-05</td>
                    <td class="px-6 py-4"><span class="status-pending text-pending font-medium">Pending</span></td>
                    <td class="px-6 py-4">
                      <button class="view-button bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors" onclick="showApplicantModal(4, 'Carlos Mendoza', 'Certificate of Residency', 'Pending', 'School enrollment', ['Valid ID', 'Birth Certificate'])">View</button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="p-4">
              <button class="save-button bg-success text-white px-4 py-2 rounded hover:bg-green-600 transition-colors" id="saveButton" onclick="saveAllChanges()">
                <i class="fas fa-save mr-2"></i>Save
              </button>
            </div>
          </div>
        </div>

        <!-- Approved Documents Section -->
        <div class="content" id="approvedDocuments" style="display: none;">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold">Approved Documents</h2>
            <div class="filter-search-bar flex items-center space-x-4">
              <div class="icons">
                <button class="filter-icon bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="toggleApprovedFilter()">
                  <i class="fas fa-filter mr-2"></i>Filter
                </button>
              </div>
              <div class="search-section flex">
                <input type="text" id="approvedSearchInput" placeholder="Type to search..." oninput="filterApprovedTable(this.value)" style="display: none;" 
                  class="search-input border border-gray-300 rounded-l px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                <button class="search-icon bg-primary text-white px-4 py-2 rounded-r hover:bg-secondary transition-colors" onclick="toggleApprovedSearch()">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Filter Panel for Approved Documents -->
          <div id="approvedFilterPanel" class="filter-panel bg-white rounded-lg shadow mb-6 p-4 hidden dark:bg-gray-800">
            <div class="filter-header flex justify-between items-center mb-4">
              <h3 class="text-lg font-semibold">Filter Options</h3>
              <button class="close-filter text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" onclick="toggleApprovedFilter()">&times;</button>
            </div>
            <div class="filter-content space-y-4">
              <div class="filter-group">
                <label class="block mb-2 font-medium">Document Type:</label>
                <div class="multi-select-container relative">
                  <div class="multi-select-display border border-gray-300 rounded px-4 py-2 cursor-pointer flex justify-between items-center dark:bg-gray-700 dark:border-gray-600" onclick="toggleApprovedDocTypeDropdown()">
                    <span id="approvedDocTypeDisplay">All Types</span>
                    <span class="dropdown-arrow">▼</span>
                  </div>
                  <div id="approvedDocTypeDropdown" class="multi-select-dropdown absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded shadow-lg hidden dark:bg-gray-700 dark:border-gray-600">
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Barangay Clearance" onchange="updateApprovedDocTypeFilter()" class="mr-2"> Barangay Clearance
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Certificate of Indigency" onchange="updateApprovedDocTypeFilter()" class="mr-2"> Certificate of Indigency
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Business Permit" onchange="updateApprovedDocTypeFilter()" class="mr-2"> Business Permit
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Barangay ID" onchange="updateApprovedDocTypeFilter()" class="mr-2"> Barangay ID
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Certificate of Residency" onchange="updateApprovedDocTypeFilter()" class="mr-2"> Certificate of Residency
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="filter-group">
                <label class="block mb-2 font-medium">Date Range:</label>
                <div class="flex items-center space-x-2">
                  <input type="date" id="approvedDateFrom" onchange="applyApprovedFilters()" class="border border-gray-300 rounded px-3 py-1 dark:bg-gray-700 dark:border-gray-600">
                  <span>to</span>
                  <input type="date" id="approvedDateTo" onchange="applyApprovedFilters()" class="border border-gray-300 rounded px-3 py-1 dark:bg-gray-700 dark:border-gray-600">
                </div>
              </div>
              <button class="clear-filters bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="clearApprovedFilters()">Clear All</button>
            </div>
          </div>

          <!-- Approved Documents Table -->
          <div class="table-container bg-white rounded-lg shadow overflow-hidden dark:bg-gray-800">
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-gray-100 dark:bg-gray-700">
                  <tr>
                    <th class="px-6 py-3 text-left font-medium">Invoice Number</th>
                    <th class="px-6 py-3 text-left font-medium">Name</th>
                    <th class="px-6 py-3 text-left font-medium">Document Type</th>
                    <th class="px-6 py-3 text-left font-medium">Date of Approval</th>
                    <th class="px-6 py-3 text-left font-medium">Print Document</th>
                    <th class="px-6 py-3 text-left font-medium">Released</th>
                  </tr>
                </thead>
                <tbody id="approvedTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
                  <!-- Approved documents will be populated here -->
                </tbody>
              </table>
            </div>
            <div class="p-4">
              <button class="save-button bg-success text-white px-4 py-2 rounded hover:bg-green-600 transition-colors" id="approvedSaveButton" onclick="saveApprovedChanges()">
                <i class="fas fa-save mr-2"></i>Save
              </button>
            </div>
          </div>
        </div>

        <!-- Released Documents Section -->
        <div class="content" id="releasedDocuments" style="display: none;">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold">Released Documents</h2>
            <div class="filter-search-bar flex items-center space-x-4">
              <div class="icons">
                <button class="filter-icon bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="toggleReleasedFilter()">
                  <i class="fas fa-filter mr-2"></i>Filter
                </button>
              </div>
              <div class="search-section flex">
                <input type="text" id="releasedSearchInput" placeholder="Type to search..." oninput="filterReleasedTable(this.value)" style="display: none;" 
                  class="search-input border border-gray-300 rounded-l px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                <button class="search-icon bg-primary text-white px-4 py-2 rounded-r hover:bg-secondary transition-colors" onclick="toggleReleasedSearch()">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Filter Panel for Released Documents -->
          <div id="releasedFilterPanel" class="filter-panel bg-white rounded-lg shadow mb-6 p-4 hidden dark:bg-gray-800">
            <div class="filter-header flex justify-between items-center mb-4">
              <h3 class="text-lg font-semibold">Filter Options</h3>
              <button class="close-filter text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" onclick="toggleReleasedFilter()">&times;</button>
            </div>
            <div class="filter-content space-y-4">
              <div class="filter-group">
                <label class="block mb-2 font-medium">Document Type:</label>
                <div class="multi-select-container relative">
                  <div class="multi-select-display border border-gray-300 rounded px-4 py-2 cursor-pointer flex justify-between items-center dark:bg-gray-700 dark:border-gray-600" onclick="toggleReleasedDocTypeDropdown()">
                    <span id="releasedDocTypeDisplay">All Types</span>
                    <span class="dropdown-arrow">▼</span>
                  </div>
                  <div id="releasedDocTypeDropdown" class="multi-select-dropdown absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded shadow-lg hidden dark:bg-gray-700 dark:border-gray-600">
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Barangay Clearance" onchange="updateReleasedDocTypeFilter()" class="mr-2"> Barangay Clearance
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Certificate of Indigency" onchange="updateReleasedDocTypeFilter()" class="mr-2"> Certificate of Indigency
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Business Permit" onchange="updateReleasedDocTypeFilter()" class="mr-2"> Business Permit
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Barangay ID" onchange="updateReleasedDocTypeFilter()" class="mr-2"> Barangay ID
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Certificate of Residency" onchange="updateReleasedDocTypeFilter()" class="mr-2"> Certificate of Residency
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="filter-group">
                <label class="block mb-2 font-medium">Date Range:</label>
                <div class="flex items-center space-x-2">
                  <input type="date" id="releasedDateFrom" onchange="applyReleasedFilters()" class="border border-gray-300 rounded px-3 py-1 dark:bg-gray-700 dark:border-gray-600">
                  <span>to</span>
                  <input type="date" id="releasedDateTo" onchange="applyReleasedFilters()" class="border border-gray-300 rounded px-3 py-1 dark:bg-gray-700 dark:border-gray-600">
                </div>
              </div>
              <button class="clear-filters bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="clearReleasedFilters()">Clear All</button>
            </div>
          </div>

          <!-- Released Documents Table -->
          <div class="table-container bg-white rounded-lg shadow overflow-hidden dark:bg-gray-800">
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-gray-100 dark:bg-gray-700">
                  <tr>
                    <th class="px-6 py-3 text-left font-medium">Select</th>
                    <th class="px-6 py-3 text-left font-medium">Invoice</th>
                    <th class="px-6 py-3 text-left font-medium">Name</th>
                    <th class="px-6 py-3 text-left font-medium">Document Type</th>
                    <th class="px-6 py-3 text-left font-medium">Release Date</th>
                  </tr>
                </thead>
                <tbody id="releasedTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
                  <!-- Released documents will be populated here -->
                </tbody>
              </table>
            </div>
            <div class="p-4">
              <button id="releasedMoveButton" class="move-button move-to-approved bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="showMoveConfirmation('released')">
                <i class="fas fa-check-circle mr-2"></i>Move to Approved
              </button>
            </div>
          </div>
        </div>

        <!-- Rejected Documents Section -->
        <div class="content" id="rejectedDocuments" style="display: none;">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold">Rejected Documents</h2>
            <div class="filter-search-bar flex items-center space-x-4">
              <div class="icons">
                <button class="filter-icon bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="toggleRejectedFilter()">
                  <i class="fas fa-filter mr-2"></i>Filter
                </button>
              </div>
              <div class="search-section flex">
                <input type="text" id="rejectedSearchInput" placeholder="Type to search..." oninput="filterRejectedTable(this.value)" style="display: none;" 
                  class="search-input border border-gray-300 rounded-l px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                <button class="search-icon bg-primary text-white px-4 py-2 rounded-r hover:bg-secondary transition-colors" onclick="toggleRejectedSearch()">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Filter Panel for Rejected Documents -->
          <div id="rejectedFilterPanel" class="filter-panel bg-white rounded-lg shadow mb-6 p-4 hidden dark:bg-gray-800">
            <div class="filter-header flex justify-between items-center mb-4">
              <h3 class="text-lg font-semibold">Filter Options</h3>
              <button class="close-filter text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" onclick="toggleRejectedFilter()">&times;</button>
            </div>
            <div class="filter-content space-y-4">
              <div class="filter-group">
                <label class="block mb-2 font-medium">Document Type:</label>
                <div class="multi-select-container relative">
                  <div class="multi-select-display border border-gray-300 rounded px-4 py-2 cursor-pointer flex justify-between items-center dark:bg-gray-700 dark:border-gray-600" onclick="toggleRejectedDocTypeDropdown()">
                    <span id="rejectedDocTypeDisplay">All Types</span>
                    <span class="dropdown-arrow">▼</span>
                  </div>
                  <div id="rejectedDocTypeDropdown" class="multi-select-dropdown absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded shadow-lg hidden dark:bg-gray-700 dark:border-gray-600">
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Barangay Clearance" onchange="updateRejectedDocTypeFilter()" class="mr-2"> Barangay Clearance
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Certificate of Indigency" onchange="updateRejectedDocTypeFilter()" class="mr-2"> Certificate of Indigency
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Business Permit" onchange="updateRejectedDocTypeFilter()" class="mr-2"> Business Permit
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Barangay ID" onchange="updateRejectedDocTypeFilter()" class="mr-2"> Barangay ID
                    </label>
                    <label class="checkbox-label block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600">
                      <input type="checkbox" value="Certificate of Residency" onchange="updateRejectedDocTypeFilter()" class="mr-2"> Certificate of Residency
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="filter-group">
                <label class="block mb-2 font-medium">Date Range:</label>
                <div class="flex items-center space-x-2">
                  <input type="date" id="rejectedDateFrom" onchange="applyRejectedFilters()" class="border border-gray-300 rounded px-3 py-1 dark:bg-gray-700 dark:border-gray-600">
                  <span>to</span>
                  <input type="date" id="rejectedDateTo" onchange="applyRejectedFilters()" class="border border-gray-300 rounded px-3 py-1 dark:bg-gray-700 dark:border-gray-600">
                </div>
              </div>
              <button class="clear-filters bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="clearRejectedFilters()">Clear All</button>
            </div>
          </div>

          <!-- Rejected Documents Table -->
          <div class="table-container bg-white rounded-lg shadow overflow-hidden dark:bg-gray-800">
            <div class="overflow-x-auto">
              <table class="w-full">
                <thead class="bg-gray-100 dark:bg-gray-700">
                  <tr>
                    <th class="px-6 py-3 text-left font-medium">Select</th>
                    <th class="px-6 py-3 text-left font-medium">Name</th>
                    <th class="px-6 py-3 text-left font-medium">Document Type</th>
                    <th class="px-6 py-3 text-left font-medium">Rejection Date</th>
                  </tr>
                </thead>
                <tbody id="rejectedTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
                  <!-- Rejected documents will be populated here -->
                </tbody>
              </table>
            </div>
            <div class="p-4">
              <button id="rejectedMoveButton" class="move-button move-to-requests bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="showMoveConfirmation('rejected')">
                <i class="fas fa-file-alt mr-2"></i>Move to Requests
              </button>
            </div>
          </div>
        </div>

        <!-- Residents Section -->
        <div class="content" id="residents" style="display: none;">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold">Residents</h2>
            <div class="filter-search-bar flex items-center space-x-4">
              <div class="icons">
                <button class="filter-icon bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="toggleResidentsFilter()">
                  <i class="fas fa-filter mr-2"></i>Filter
                </button>
              </div>
              <div class="search-section flex">
                <input type="text" id="residentsSearchInput" placeholder="Type to search..." oninput="filterResidentsTable(this.value)" style="display: none;" 
                  class="search-input border border-gray-300 rounded-l px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                <button class="search-icon bg-primary text-white px-4 py-2 rounded-r hover:bg-secondary transition-colors" onclick="toggleResidentsSearch()">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
          </div>

          <!-- Filter Panel for Residents -->
          <div id="residentsFilterPanel" class="filter-panel bg-white rounded-lg shadow mb-6 p-4 hidden dark:bg-gray-800">
            <div class="filter-header flex justify-between items-center mb-4">
              <h3 class="text-lg font-semibold">Filter Options</h3>
              <button class="close-filter text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" onclick="toggleResidentsFilter()">&times;</button>
            </div>
            <div class="filter-content space-y-4">
              <div class="filter-group">
                <label class="block mb-2 font-medium">Sex:</label>
                <div class="status-checkbox-container flex space-x-4">
                  <label class="checkbox-label flex items-center">
                    <input type="checkbox" value="Male" data-filter="sex" onchange="updateResidentsSexFilter()" class="mr-2">Male
                  </label>
                  <label class="checkbox-label flex items-center">
                    <input type="checkbox" value="Female" data-filter="sex" onchange="updateResidentsSexFilter()" class="mr-2"> Female
                  </label>
                </div>
              </div>
              
              <div class="filter-group">
                <label class="block mb-2 font-medium">Civil Status:</label>
                <div class="status-checkbox-container grid grid-cols-2 gap-2">
                  <label class="checkbox-label flex items-center">
                    <input type="checkbox" value="Single" data-filter="civilStatus" onchange="updateResidentsCivilStatusFilter()" class="mr-2"> Single
                  </label>
                  <label class="checkbox-label flex items-center">
                    <input type="checkbox" value="Married" data-filter="civilStatus" onchange="updateResidentsCivilStatusFilter()" class="mr-2"> Married
                  </label>
                  <label class="checkbox-label flex items-center">
                    <input type="checkbox" value="Widowed" data-filter="civilStatus" onchange="updateResidentsCivilStatusFilter()" class="mr-2"> Widowed
                  </label>
                  <label class="checkbox-label flex items-center">
                    <input type="checkbox" value="Separated" data-filter="civilStatus" onchange="updateResidentsCivilStatusFilter()" class="mr-2"> Separated
                  </label>
                </div>
              </div>
                      
              <div class="filter-group">
                <label class="block mb-2 font-medium">Age Range:</label>
                <div class="flex items-center space-x-2">
                  <input type="number" id="ageFrom" placeholder="From" min="0" max="120" onchange="applyResidentsFilters()" 
                    class="border border-gray-300 rounded px-3 py-1 w-20 dark:bg-gray-700 dark:border-gray-600">
                  <span>to</span>
                  <input type="number" id="ageTo" placeholder="To" min="0" max="120" onchange="applyResidentsFilters()" 
                    class="border border-gray-300 rounded px-3 py-1 w-20 dark:bg-gray-700 dark:border-gray-600">
                </div>
              </div>
              
              <button class="clear-filters bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="clearResidentsFilters()">Clear All</button>
            </div>
          </div>

          <!-- Residents Table -->
          <div class="table-container bg-white rounded-lg shadow overflow-hidden dark:bg-gray-800">
            <div class="overflow-x-auto">
              <table class="residents-table w-full">
                <thead class="bg-gray-100 dark:bg-gray-700">
                  <tr>
                    <th class="px-6 py-3 text-center font-medium">
                      <input type="checkbox" id="selectAllResidents" onchange="toggleSelectAllResidents()" class="mr-2">
                      Delete
                    </th>
                    <th class="px-6 py-3 text-left font-medium">Full Name</th>
                    <th class="px-6 py-3 text-left font-medium">Sex</th>
                    <th class="px-6 py-3 text-left font-medium">Complete Address</th>
                    <th class="px-6 py-3 text-left font-medium">Birthday</th>
                    <th class="px-6 py-3 text-left font-medium">Birthplace</th>
                    <th class="px-6 py-3 text-left font-medium">Age</th>
                    <th class="px-6 py-3 text-left font-medium">Civil Status</th>
                    <th class="px-6 py-3 text-left font-medium">Contact Number</th>
                  </tr>
                </thead>
                <tbody id="residentsTableBody" class="divide-y divide-gray-200 dark:divide-gray-700">
                  <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4 text-center">
                      <input type="checkbox" class="resident-checkbox" name="residentSelect">
                    </td>
                    <td class="px-6 py-4">Juan Dela Cruz</td>
                    <td class="px-6 py-4">Male</td>
                    <td class="px-6 py-4">123 Sampaguita St., Brgy. Example, Quezon City</td>
                    <td class="px-6 py-4">1985-06-15</td>
                    <td class="px-6 py-4">Manila, Philippines</td>
                    <td class="px-6 py-4">39</td>
                    <td class="px-6 py-4">Married</td>
                    <td class="px-6 py-4">09123456789</td>
                  </tr>
                  <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4 text-center">
                      <input type="checkbox" class="resident-checkbox" name="residentSelect">
                    </td>                
                    <td class="px-6 py-4">Maria Santos</td>
                    <td class="px-6 py-4">Female</td>
                    <td class="px-6 py-4">456 Rose Ave., Brgy. Example, Quezon City</td>
                    <td class="px-6 py-4">1990-03-22</td>
                    <td class="px-6 py-4">Quezon City, Philippines</td>
                    <td class="px-6 py-4">35</td>
                    <td class="px-6 py-4">Single</td>
                    <td class="px-6 py-4">09234567890</td>
                  </tr>
                  <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4 text-center">
                      <input type="checkbox" class="resident-checkbox" name="residentSelect">
                    </td>
                    <td class="px-6 py-4">Pedro Rodriguez</td>
                    <td class="px-6 py-4">Male</td>
                    <td class="px-6 py-4">789 Lily St., Brgy. Example, Quezon City</td>
                    <td class="px-6 py-4">1978-11-08</td>
                    <td class="px-6 py-4">Cavite, Philippines</td>
                    <td class="px-6 py-4">46</td>
                    <td class="px-6 py-4">Married</td>
                    <td class="px-6 py-4">09345678901</td>
                  </tr>
                  <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4 text-center">
                      <input type="checkbox" class="resident-checkbox" name="residentSelect">
                    </td>
                    <td class="px-6 py-4">Ana Garcia</td>
                    <td class="px-6 py-4">Female</td>
                    <td class="px-6 py-4">321 Jasmine Rd., Brgy. Example, Quezon City</td>
                    <td class="px-6 py-4">1995-09-12</td>
                    <td class="px-6 py-4">Bulacan, Philippines</td>
                    <td class="px-6 py-4">29</td>
                    <td class="px-6 py-4">Single</td>
                    <td class="px-6 py-4">09456789012</td>
                  </tr>
                  <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                    <td class="px-6 py-4 text-center">
                      <input type="checkbox" class="resident-checkbox" name="residentSelect">
                    </td>
                    <td class="px-6 py-4">Carlos Mendoza</td>
                    <td class="px-6 py-4">Male</td>
                    <td class="px-6 py-4">654 Tulip Blvd., Brgy. Example, Quezon City</td>
                    <td class="px-6 py-4">1982-01-30</td>
                    <td class="px-6 py-4">Laguna, Philippines</td>
                    <td class="px-6 py-4">43</td>
                    <td class="px-6 py-4">Widowed</td>
                    <td class="px-6 py-4">09567890123</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="p-4 flex justify-between items-center">
              <div class="edit-controls">
                <button id="editResidentsBtn" class="edit-btn bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="toggleEditMode()">
                  <i class="fas fa-edit mr-2"></i>Edit Details
                </button>
              </div>
              
              <div class="primary-actions flex space-x-4">
                <button class="btn-add-resident bg-success text-white px-4 py-2 rounded hover:bg-green-600 transition-colors relative overflow-hidden" onclick="showAddResidentModal()">
                  <i class="fas fa-user-plus mr-2"></i>
                  <span>Add Resident</span>
                  <div class="btn-shine"></div>
                </button>
                
                <button class="btn-delete-residents bg-danger text-white px-4 py-2 rounded hover:bg-red-600 transition-colors relative overflow-hidden" onclick="deleteSelectedResidents()">
                  <i class="fas fa-user-minus mr-2"></i>
                  <span>Remove Selected</span>
                  <div class="btn-shine"></div>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Admin Settings Section -->
        <div class="content" id="adminSettings" style="display: none;">
          <div class="admin-settings-container fade-in">
            <div class="content">
              <h2 class="text-2xl font-bold mb-6"><i class="fas fa-cog mr-2"></i> Admin Settings</h2>
            </div>

            <div class="settings-content bg-white rounded-lg shadow dark:bg-gray-800">
              <!-- Navigation Tabs -->
              <div class="settings-nav flex border-b dark:border-gray-700">
                <button class="nav-tab active px-6 py-3 border-b-2 border-primary font-medium text-primary dark:text-primary-300" onclick="showTab('security')">
                  <i class="fas fa-shield-alt mr-2"></i> Security & Access
                </button>
                <button class="nav-tab px-6 py-3 font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300" onclick="showTab('operations')">
                  <i class="fas fa-cogs mr-2"></i> Operations
                </button>
                <button class="nav-tab px-6 py-3 font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300" onclick="showTab('system')">
                  <i class="fas fa-server mr-2"></i> System & Data
                </button>
              </div>

              <!-- Security & Access Tab -->
              <div id="security" class="tab-content active p-6">
                <!-- Primary Admin Credentials -->
                <div class="settings-group priority-high mb-8">
                  <div class="group-header flex items-center mb-4">
                    <h3 class="text-lg font-semibold"><i class="fas fa-user-shield mr-2"></i> Primary Admin Credentials</h3>
                    <span class="priority-badge bg-red-100 text-red-800 text-xs font-medium px-2.5 py-0.5 rounded ml-2 dark:bg-red-900 dark:text-red-300">Critical</span>
                  </div>
                  <div class="form-row grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-group">
                      <label for="loginUsername" class="block mb-2 font-medium">
                        <i class="fas fa-user mr-2"></i> Admin Username
                      </label>
                      <input type="text" id="loginUsername" placeholder="Enter admin username" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                    </div>
                    <div class="form-group">
                      <label for="loginPassword" class="block mb-2 font-medium">
                        <i class="fas fa-lock mr-2"></i> New Password
                      </label>
                      <input type="password" id="loginPassword" placeholder="Enter new admin password" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                    </div>
                  </div>
                </div>

                <!-- Feature Access Control -->
                <div class="settings-group mb-8">
                  <div class="group-header flex items-center mb-4">
                    <h3 class="text-lg font-semibold"><i class="fas fa-key mr-2"></i> Feature Access Control</h3>
                    <span class="info-badge bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded ml-2 dark:bg-blue-900 dark:text-blue-300">Secure Access</span>
                  </div>
                  <div class="form-row grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="form-group">
                      <label for="residentsPassword" class="block mb-2 font-medium">
                        <i class="fas fa-users mr-2"></i> Residents Management
                      </label>
                      <input type="password" id="residentsPassword" placeholder="Password for residents section" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                    </div>
                    <div class="form-group">
                      <label for="movePassword" class="block mb-2 font-medium">
                        <i class="fas fa-arrows-alt mr-2"></i> Move Operations
                      </label>
                      <input type="password" id="movePassword" placeholder="Password for moving applications" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                    </div>
                  </div>
                  <div class="form-row mt-4">
                    <div class="form-group">
                      <label for="editPassword" class="block mb-2 font-medium">
                        <i class="fas fa-edit mr-2"></i> Edit Mode Access
                      </label>
                      <input type="password" id="editPassword" placeholder="Password for edit mode" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                    </div>
                  </div>
                </div>
                
                <!-- Session Management -->
                <div class="settings-group full-width mb-8">
                  <div class="group-header flex items-center mb-4">
                    <h3 class="text-lg font-semibold"><i class="fas fa-clock mr-2"></i> Session Management</h3>
                    <span class="info-badge bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded ml-2 dark:bg-blue-900 dark:text-blue-300">Auto-Security</span>
                  </div>
                  <div class="form-row grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="form-group">
                      <label for="sessionTimeout" class="block mb-2 font-medium">
                        <i class="fas fa-stopwatch mr-2"></i> Auto-logout Timer
                      </label>
                      <select id="sessionTimeout" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                        <option value="0">Disabled</option>
                        <option value="15">15 minutes</option>
                        <option value="30" selected>30 minutes</option>
                        <option value="60">1 hour</option>
                        <option value="120">2 hours</option>
                        <option value="240">4 hours</option>
                        <option value="480">8 hours</option>
                      </select>
                      <small class="text-gray-500 dark:text-gray-400">System will automatically log out after this period of inactivity</small>
                    </div>
                    <div class="form-group">
                      <label for="warningTime" class="block mb-2 font-medium">
                        <i class="fas fa-exclamation-triangle mr-2"></i> Warning Time
                      </label>
                      <select id="warningTime" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                        <option value="1">1 minute</option>
                        <option value="2">2 minutes</option>
                        <option value="5" selected>5 minutes</option>
                        <option value="10">10 minutes</option>
                      </select>
                      <small class="text-gray-500 dark:text-gray-400">Show warning this many minutes before auto-logout</small>
                    </div>
                    <div class="form-group flex items-end">
                      <div class="checkbox-group">
                        <input type="checkbox" id="enableSessionWarning" checked 
                          class="w-4 h-4 text-primary bg-gray-100 border-gray-300 rounded focus:ring-primary dark:focus:ring-primary dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="enableSessionWarning" class="ml-2 font-medium">
                          <i class="fas fa-bell mr-2"></i> Enable logout warning notifications
                        </label>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="system-actions flex justify-end space-x-4">
                  <button onclick="showSaveSettingsModal()" class="btn btn-success bg-success text-white px-4 py-2 rounded hover:bg-green-600 transition-colors">
                    <i class="fas fa-save mr-2"></i> Save All Settings
                  </button>
                  <button onclick="initiateAccountRecovery()" class="btn btn-warning bg-warning text-white px-4 py-2 rounded hover:bg-yellow-600 transition-colors">
                    <i class="fas fa-life-ring mr-2"></i> Account Recovery
                  </button>
                  <button onclick="showLogoutConfirmation()" class="btn btn-danger bg-danger text-white px-4 py-2 rounded hover:bg-red-600 transition-colors">
                    <i class="fas fa-sign-out-alt mr-2"></i> Logout Admin
                  </button>
                </div>
              </div>

              <!-- Operations Tab -->
              <div id="operations" class="tab-content p-6 hidden">
                <!-- Document Processing Requirements -->
                <div class="settings-group full-width mb-8">
                  <div class="group-header flex items-center mb-4">
                    <h3 class="text-lg font-semibold"><i class="fas fa-clipboard-list mr-2"></i> Document Processing Requirements</h3>
                    <span class="info-badge bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded ml-2 dark:bg-blue-900 dark:text-blue-300">Configure Workflows</span>
                  </div>
                  <p class="section-description text-gray-600 dark:text-gray-400 mb-4">Configure checklist items for each document type that appear in the view progress modal.</p>
                  
                  <div class="document-requirements-section">
                    <div class="form-group mb-4">
                      <label for="requirementDocType" class="block mb-2 font-medium">
                        <i class="fas fa-file-alt mr-2"></i> Select Document Type
                      </label>
                      <select id="requirementDocType" onchange="loadRequirementsForDocType()" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                        <option value="">Choose a document type...</option>
                        <option value="Barangay Clearance">Barangay Clearance</option>
                        <option value="Certificate of Indigency">Certificate of Indigency</option>
                        <option value="Business Permit">Business Permit</option>
                        <option value="Barangay ID">Barangay ID</option>
                        <option value="Certificate of Residency">Certificate of Residency</option>
                      </select>
                    </div>

                    <div id="requirementsContainer" style="display: none;">
                      <div class="requirements-header flex justify-between items-center mb-4">
                        <h4 class="text-lg font-semibold">Requirements for <span id="selectedDocTypeName"></span></h4>
                        <button type="button" class="btn-add-requirement bg-primary text-white px-3 py-1 rounded hover:bg-secondary transition-colors" onclick="addRequirementAtPosition()">
                          <i class="fas fa-plus mr-2"></i> Add Requirement
                        </button>
                      </div>
                      
                      <div id="requirementsList" class="requirements-list space-y-2">
                        <!-- Requirements will be populated here -->
                      </div>
                      
                      <div class="requirements-actions flex space-x-4 mt-6">
                        <button type="button" class="btn btn-success bg-success text-white px-4 py-2 rounded hover:bg-green-600 transition-colors" onclick="saveRequirements()">
                          <i class="fas fa-save mr-2"></i> Save Requirements
                        </button>
                        <button type="button" class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="resetRequirements()">
                          <i class="fas fa-undo mr-2"></i> Reset to Default
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Archive Settings -->
                <div class="settings-group mb-8">
                  <div class="group-header flex items-center mb-4">
                    <h3 class="text-lg font-semibold"><i class="fas fa-archive mr-2"></i> Archive & Release Settings</h3>
                    <span class="info-badge bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded ml-2 dark:bg-blue-900 dark:text-blue-300">Auto-Management</span>
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <label for="releaseDuration" class="block mb-2 font-medium">
                        <i class="fas fa-calendar-alt mr-2"></i> Auto-Archive Duration (days)
                      </label>
                      <input type="number" id="releaseDuration" min="1" max="365" placeholder="30" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                      <small class="text-gray-500 dark:text-gray-400">Released documents will be automatically archived after this many days</small>
                    </div>
                  </div>
                </div>
                <div class="system-actions flex justify-end space-x-4">
                  <button onclick="showSaveSettingsModal()" class="btn btn-success bg-success text-white px-4 py-2 rounded hover:bg-green-600 transition-colors">
                    <i class="fas fa-save mr-2"></i> Save All Settings
                  </button>
                  <button onclick="initiateAccountRecovery()" class="btn btn-warning bg-warning text-white px-4 py-2 rounded hover:bg-yellow-600 transition-colors">
                    <i class="fas fa-life-ring mr-2"></i> Account Recovery
                  </button>
                  <button onclick="showLogoutConfirmation()" class="btn btn-danger bg-danger text-white px-4 py-2 rounded hover:bg-red-600 transition-colors">
                    <i class="fas fa-sign-out-alt mr-2"></i> Logout Admin
                  </button>
                </div>
              </div>

              <!-- System & Data Tab -->
              <div id="system" class="tab-content p-6 hidden">
                <!-- Backup & Data Management -->
                <div class="settings-group mb-8">
                  <div class="group-header flex items-center mb-4">
                    <h3 class="text-lg font-semibold"><i class="fas fa-database mr-2"></i> Backup & Data Management</h3>
                    <span class="info-badge bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded ml-2 dark:bg-blue-900 dark:text-blue-300">Data Protection</span>
                  </div>
                  <div class="form-row mb-4">
                    <div class="form-group">
                      <label for="backupSchedule" class="block mb-2 font-medium">
                        <i class="fas fa-calendar-check mr-2"></i> Automatic Backup Schedule
                      </label>
                      <select id="backupSchedule" 
                        class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                        <option value="manual">Manual Only</option>
                        <option value="daily">Daily Automatic</option>
                        <option value="weekly">Weekly Automatic</option>
                      </select>
                    </div>
                  </div>
                  
                  <div class="backup-actions flex flex-wrap gap-4">
                    <button onclick="performManualBackup()" class="btn btn-primary bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors">
                      <i class="fas fa-download mr-2"></i> Create Manual Backup
                    </button>
                    <button onclick="exportDatabase()" class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500">
                      <i class="fas fa-file-export mr-2"></i> Export Database
                    </button>
                    <input type="file" id="importFile" accept=".json" onchange="importDatabase(event)" style="display: none;">
                    <button onclick="document.getElementById('importFile').click()" class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500">
                      <i class="fas fa-file-import mr-2"></i> Import Database
                    </button>
                  </div>
                </div>

                <div class="system-actions sys-btn flex justify-end space-x-4 mt-12">
                  <button onclick="showSaveSettingsModal()" class="btn btn-success bg-success text-white px-4 py-2 rounded hover:bg-green-600 transition-colors">
                    <i class="fas fa-save mr-2"></i> Save All Settings
                  </button>
                  <button onclick="initiateAccountRecovery()" class="btn btn-warning bg-warning text-white px-4 py-2 rounded hover:bg-yellow-600 transition-colors">
                    <i class="fas fa-life-ring mr-2"></i> Account Recovery
                  </button>
                  <button type="button" onclick="showLogoutConfirmation()" class="btn btn-danger bg-danger text-white px-4 py-2 rounded hover:bg-red-600 transition-colors">
                    <i class="fas fa-sign-out-alt mr-2"></i> Logout Admin
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Document Request Modal -->
  <div id="applicantModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="modal-content bg-white rounded-lg shadow-lg w-full max-w-md dark:bg-gray-800">
      <div class="modal-header flex justify-between items-center p-4 border-b dark:border-gray-700">
        <h2 id="applicantName" class="text-xl font-bold"></h2>
        <span class="close text-gray-500 hover:text-gray-700 text-2xl cursor-pointer dark:hover:text-gray-300" onclick="closeModal()">&times;</span>
      </div>
      <div class="modal-body p-4 space-y-4">
        <div>
          <label class="block font-medium mb-1">Document Type:</label>
          <div id="docType" class="bg-gray-100 p-2 rounded dark:bg-gray-700"></div>
        </div>
        <div>
          <label class="block font-medium mb-1">Status:</label>
          <div id="status" class="bg-gray-100 p-2 rounded dark:bg-gray-700"></div>
        </div>
        <div>
          <label class="block font-medium mb-1">Purpose:</label>
          <div id="purpose" class="bg-gray-100 p-2 rounded dark:bg-gray-700"></div>
        </div>
        <div>
          <label class="block font-medium mb-1">Checklist:</label>
          <div class="checklist bg-gray-100 p-2 rounded dark:bg-gray-700" id="checklist">
            <!-- Checklist items dynamically inserted here -->
          </div>
        </div>
      </div>
      <div class="modal-footer p-4 border-t flex justify-end space-x-4 dark:border-gray-700">
        <button class="approve-btn bg-success text-white px-4 py-2 rounded hover:bg-green-600 transition-colors" id="approveBtn" onclick="approveApplication()" disabled>Approve</button>
        <button class="reject-btn bg-danger text-white px-4 py-2 rounded hover:bg-red-600 transition-colors" onclick="rejectApplication()">Reject</button>
      </div>
    </div>
  </div>

  <!-- Password Resident Modal -->
  <div class="passwordmodal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="residentsPasswordModal">
    <div class="passwordmodal-content bg-white rounded-lg shadow-lg w-full max-w-sm dark:bg-gray-800">
      <div class="passwordmodal-header p-6 text-center">
        <div class="lock-icon text-4xl text-primary mb-4">
          <i class="fas fa-lock"></i>
        </div>
        <h3 class="text-xl font-bold mb-2">Restricted Access</h3>
        <p class="text-gray-600 dark:text-gray-400">Enter password to access Residents Management</p>
      </div>
      <div class="passwordmodal-body p-6 pt-0">
        <div class="password-input-group mb-4">
          <input type="password" id="residentsPasswordInput" placeholder="Enter password..." 
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
        </div>
    
        <div class="modal-footer flex justify-end space-x-4">
          <button type="button" class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="cancelResidentsPassword()">
            <i class="fas fa-times mr-2"></i> Cancel
          </button>
          <button type="button" class="btn btn-primary bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="confirmResidentsPassword()">
            <i class="fas fa-unlock mr-2"></i> Access
          </button>
        </div>
        <div class="forgot-password-section text-center mt-4">
          <button type="button" onclick="showForgotPasswordModal('Residents')" class="btn-forgot text-primary hover:underline">
            Forgot Password?
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Edit Resident Modal -->
  <div id="passwordModal" class="passwordmodal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="passwordmodal-content bg-white rounded-lg shadow-lg w-full max-w-sm dark:bg-gray-800">
      <div class="passwordmodal-header p-6 text-center">
        <div class="lock-icon text-4xl text-primary mb-4">
          <i class="fas fa-lock"></i>
        </div>
        <h3 class="text-xl font-bold">Enter Password to Edit Residents</h3>
      </div>
      <div class="passwordmodal-body p-6 pt-0">
        <div class="password-input-group mb-4">
          <input type="password" id="passwordInput" placeholder="Enter password" 
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
        </div>
        <div class="modal-footer flex justify-end space-x-4">
          <button class="password-btn confirm bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="confirmPassword()">Confirm</button>
          <button class="password-btn cancel bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="cancelPassword()">Cancel</button>
        </div>
        <div class="forgot-password-section text-center mt-4">
          <button type="button" onclick="showForgotPasswordModal('Residents')" class="btn-forgot text-primary hover:underline">
            Forgot Password?
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Resident Modal -->
  <div class="add-modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="addResidentModal">
    <div class="addmodal-content bg-white rounded-lg shadow-lg w-full max-w-lg dark:bg-gray-800">
      <div class="addmodal-header flex justify-between items-center p-4 border-b dark:border-gray-700">
        <h3 class="text-xl font-bold">Add New Resident</h3>
        <span class="close text-gray-500 hover:text-gray-700 text-2xl cursor-pointer dark:hover:text-gray-300" onclick="hideAddResidentModal()">&times;</span>
      </div>
      <div class="addmodal-body p-4">
        <form id="addResidentForm" class="space-y-4">
          <div class="addform-row grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="addform-group">
              <label for="fullName" class="block mb-1 font-medium">Full Name *</label>
              <input type="text" id="fullName" name="fullName" required 
                class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
            </div>
            <div class="addform-group">
              <label for="sex" class="block mb-1 font-medium">Sex *</label>
              <select id="sex" name="sex" required 
                class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                <option value="">Select Sex</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
            </div>
          </div>
          
          <div class="addform-group">
            <label for="address" class="block mb-1 font-medium">Complete Address *</label>
            <textarea id="address" name="address" rows="2" required 
              class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600"></textarea>
          </div>
          
          <div class="addform-row grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="form-group">
              <label for="birthday" class="block mb-1 font-medium">Birthday *</label>
              <input type="date" id="birthday" name="birthday" required 
                class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
            </div>
            <div class="addform-group">
              <label for="birthplace" class="block mb-1 font-medium">Birthplace *</label>
              <input type="text" id="birthplace" name="birthplace" required 
                class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
            </div>
          </div>
          
          <div class="addform-row grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="addform-group">
              <label for="civilStatus" class="block mb-1 font-medium">Civil Status *</label>
              <select id="civilStatus" name="civilStatus" required 
                class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
                <option value="">Select Status</option>
                <option value="Single">Single</option>
                <option value="Married">Married</option>
                <option value="Divorced">Divorced</option>
                <option value="Widowed">Widowed</option>
              </select>
            </div>
            <div class="addform-group">
              <label for="contactNumber" class="block mb-1 font-medium">Contact Number</label>
              <input type="text" id="contactNumber" name="contactNumber" placeholder="09xxxxxxxxx" 
                class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer p-4 border-t flex justify-end space-x-4 dark:border-gray-700">
        <button type="button" class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="hideAddResidentModal()">Cancel</button>
        <button type="button" class="btn btn-primary bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="addResident()">Add Resident</button>
      </div>
    </div>
  </div>

  <!-- Admin Password Modal -->
  <div id="adminPasswordModal" class="passwordmodal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="passwordmodal-content bg-white rounded-lg shadow-lg w-full max-w-sm dark:bg-gray-800">
      <div class="passwordmodal-header p-6 text-center">
        <div class="lock-icon text-4xl text-primary mb-4">
          <i class="fas fa-lock"></i>
        </div>
        <h3 class="text-xl font-bold mb-2">Restricted Access</h3>
        <p class="text-gray-600 dark:text-gray-400">Enter password to access admin settings</p>
      </div>
      <div class="passwordmodal-body p-6 pt-0">
        <div class="password-input-group mb-4">
          <input type="password" id="adminPasswordInput" placeholder="Enter admin password" autocomplete="off" 
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">  
        </div>
        <div class="modal-footer flex justify-end space-x-4">
          <button onclick="cancelAdminPassword()" class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500">
            Cancel
          </button>
          <button class="btn btn-primary bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="confirmAdminPassword()">
            <i class="fas fa-unlock mr-2"></i> Access Settings
          </button>
        </div>
        <div class="forgot-password-section text-center mt-4">
          <button type="button" onclick="showForgotPasswordModal('Residents')" class="btn-forgot text-primary hover:underline">
            Forgot Password?
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Save Settings Password Modal -->
  <div id="saveSettingsModal" class="passwordmodal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="passwordmodal-content bg-white rounded-lg shadow-lg w-full max-w-sm dark:bg-gray-800">
      <div class="passwordmodal-header p-6 text-center">
        <div class="lock-icon text-4xl text-primary mb-4">
          <i class="fas fa-lock"></i>
        </div>
        <h3 class="text-xl font-bold mb-2">Confirm Save Settings</h3>
        <p class="text-gray-600 dark:text-gray-400">Please enter your admin password to save all settings changes:</p>
      </div>
      <div class="passwordmodal-body p-6 pt-0">
        <div class="password-input-group mb-4">
          <input type="password" id="saveSettingsPasswordInput" placeholder="Enter Admin Password" 
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
        </div>
        <div class="modal-footer flex justify-end space-x-4">
          <button onclick="confirmSaveSettings()" class="btn-primary bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors">
            <i class="fas fa-check mr-2"></i> Confirm & Save
          </button>
          <button onclick="cancelSaveSettings()" class="btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500">
            <i class="fas fa-times mr-2"></i> Cancel
          </button>
        </div> 
      </div>
    </div>
  </div>

  <!-- Password Modal for Released -->
  <div id="movePasswordModal" class="passwordmodal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="passwordmodal-content bg-white rounded-lg shadow-lg w-full max-w-sm dark:bg-gray-800">
      <div class="passwordmodal-header p-6 text-center"> 
        <div class="lock-icon text-4xl text-primary mb-4">
          <i class="fas fa-lock"></i>
        </div>
        <h3 class="text-xl font-bold mb-2">Enter Password to Move Applications</h3>
        <p id="movePasswordText" class="text-gray-600 dark:text-gray-400">You are about to move applications</p>
      </div> 
      <div class="passwordmodal-body p-6 pt-0">
        <div class="password-input-group mb-4">
          <input type="password" id="movePasswordInput" placeholder="Enter password" 
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
        </div>
        <div class="modal-footer flex justify-end space-x-4">
          <button class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="cancelMovePassword()">Cancel</button>
          <button class="btn btn-primary bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="confirmMovePassword()">Move Applications</button>
        </div>
        <div class="forgot-password-section text-center mt-4">
          <button type="button" onclick="showForgotPasswordModal('Residents')" class="btn-forgot text-primary hover:underline">
            Forgot Password?
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Forgot Password Modal -->
  <div id="forgotPasswordModal" class="passwordmodal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="passwordmodal-content bg-white rounded-lg shadow-lg w-full max-w-sm dark:bg-gray-800">
      <div class="passwordmodal-header p-6 text-center">
        <h3 class="text-xl font-bold mb-2">Password Recovery</h3>
        <p class="text-gray-600 dark:text-gray-400">Enter your recovery email to reset your <span id="forgotPasswordType" class="font-medium"></span> password:</p>
      </div>
      <div class="passwordmodal-body p-6 pt-0">
        <div class="password-input-group mb-4">
          <input type="email" id="recoveryEmail" placeholder="Enter your recovery email" 
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary dark:bg-gray-700 dark:border-gray-600">
        </div>
        <div class="modal-footer flex justify-end space-x-4">
          <button onclick="processForgotPassword()" class="btn btn-primary bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors">Send Recovery Email</button>
          <button onclick="closeForgotPasswordModal()" class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Logout Confirmation Modal -->
  <div class="modal fade logout-modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="logoutModal">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-white rounded-lg shadow-lg w-full max-w-md dark:bg-gray-800">
        <div class="modal-header p-4 border-b dark:border-gray-700">
          <h5 class="modal-title text-xl font-bold" id="logoutModalLabel">
            <i class="fas fa-exclamation-triangle text-yellow-500 mr-2"></i>
            Confirm Logout
          </h5>
          <button type="button" class="btn-close text-gray-500 hover:text-gray-700 text-2xl cursor-pointer dark:hover:text-gray-300" onclick="document.getElementById('logoutModal').classList.add('hidden')">&times;</button>
        </div>
        <div class="modal-body p-6 text-center">
          <div class="logout-icon text-4xl text-primary mb-4">
            <i class="fas fa-sign-out-alt"></i>
          </div>
          <h5 class="mb-3 text-lg font-semibold">Are you sure you want to logout?</h5>
          <p class="text-gray-600 dark:text-gray-400">You will need to re-authenticate to access the admin panel again.</p>
        </div>
        <div class="modal-footer p-4 border-t flex justify-end space-x-4 dark:border-gray-700">
          <button type="button" class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="document.getElementById('logoutModal').classList.add('hidden')">
            <i class="fas fa-times mr-2"></i> Cancel
          </button>
          <button type="button" class="btn btn-danger bg-danger text-white px-4 py-2 rounded hover:bg-red-600 transition-colors" onclick="confirmLogout()">
            <i class="fas fa-sign-out-alt mr-2"></i> Yes, Logout
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Session Warning Modal -->
  <div id="sessionWarningModal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] hidden">
    <div class="modal-content bg-white rounded-lg shadow-lg w-full max-w-md dark:bg-gray-800" style="text-align: center;">
      <div class="modal-header p-6">
        <div class="warning-icon text-5xl text-yellow-500 mb-4">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <h3 class="text-xl font-bold text-yellow-500 mb-2">Session Timeout Warning</h3>
        <p>Your session will expire in <span id="warningCountdown" class="font-bold text-yellow-500">5:00</span></p>
      </div>
      <div class="modal-body px-6 pb-6">
        <p class="mb-2">You will be automatically logged out due to inactivity.</p>
        <p>Click "Stay Logged In" to continue your session.</p>
      </div>
      <div class="modal-footer p-4 border-t flex justify-center space-x-4 dark:border-gray-700">
        <button type="button" class="btn btn-primary bg-primary text-white px-4 py-2 rounded hover:bg-secondary transition-colors" onclick="extendSession()">
          <i class="fas fa-clock mr-2"></i> Stay Logged In
        </button>
        <button type="button" class="btn btn-secondary bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors dark:bg-gray-600 dark:hover:bg-gray-500" onclick="logoutNow()">
          <i class="fas fa-sign-out-alt mr-2"></i> Logout Now
        </button>
      </div>
    </div>
  </div>

  <div id="sessionStatusIndicator" class="fixed top-5 right-5 bg-gray-900 text-white px-4 py-2 rounded-full text-sm z-50 hidden transition-all duration-300">
    <i class="fas fa-clock mr-2"></i>
    <span id="sessionTimeLeft">30:00</span>
  </div>

  <div id="toastContainer" class="fixed bottom-4 right-4 space-y-2 z-50"></div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    // Dark mode toggle functionality
    document.getElementById('darkModeToggle').addEventListener('click', function() {
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('darkMode', document.documentElement.classList.contains('dark'));
    });

    // Check for saved dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
      document.documentElement.classList.add('dark');
    }

    // All your existing JavaScript functions remain the same
    // Only the HTML structure has been enhanced with Tailwind CSS
    // Your dashboard.js will still work as before
  </script>
  <script src="dashboard.js"></script>
</body>
</html>